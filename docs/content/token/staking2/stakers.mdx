---
title: How to Stake FLOW
sidebar_title: For Stakers
---

<Callout type="warning">

  This guide is for developers who wish to stake FLOW with the help of a **node operator**. 
  If you wish to operate your own node, please read the [power user guide](/token/staking2/power-users).

</Callout>

# Introduction

This guide covers the technical integration required for a **token holder (TH)** and **node operator (NO)** 
to jointly fund and operate a staked Flow node.

Both parties have separate roles in this relationship:

- **Node Operator:** Manages the node infrastructure but _does not hold_ any FLOW tokens.
- **Token Holder:** Provides restricted, indirect access to their FLOW tokens for the sole purpose of staking.

This guide assumes that the **token holder** has already established a 
trusted relationship with a **node operator**.

# Setup

These are the steps required to set up the integration between a **token holder** and a **node operator**.

_Note: The corresponding **node operator** steps are outlined in a 
[separate guide for node operators](/token/staking2/node-operators)._

## 1. Fetch node operator information
After a node operator has agreed to run a node for you, they will create a NodeInfo object holding the IP address and public keys for your new node. 
This NodeInfo object will be stored in an account owned by the node operator. This object acts as a staking proxy 
for the node operator to access some staking options without actually having access to your tokens.

The node operator should provide you with their account address and the nodeID for your new node. 
These parameters can be passed into the get_node_info script (TH.04) to confirm the node information.

If the node information is correct, continue to step 2.

To fetch the node operator information for a node operator's staking proxy, the token holder must use use script [../transactions/#staking-with-lockboxnodestakerproxy](TH.04):

`stakingProxy/sh_get_node_info.cdc`

Script arguments:

| Argument     | Type    | Purpose |
|--------------|---------|---------|
| **account**  | Address | The address of the node operator's account. |
| **nodeID**   | String  | The unique id of the node. |

Script returns:

The `StakingProxy.NodeInfo` struct contains the details for the node. If no NodeInfo is available, the script will fail.

## 2. Register node & grant staking access to the node operator

To register the node as the token holder account's staker, the token holder must use  use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.05):

`stakingProxy/sh_register_node.cdc`

Transaction arguments:

| Argument    | Type    | Purpose |
|-------------|---------|---------|
| **address** | Address | The node operator address. |
| **nodeID**  | String  | The `id` from the NodeInfo. |
| **amount**  | UFix64  | The number of FLOW tokens to stake. |

# Staking Actions

Once the token holder has registered their node with the node operator's info, their tokens and info
are committed to the central staking contract for the next epoch. They now have access to 
various staking operations that they can perform at any time, assuming they have
the correct number of tokens to perform the action.

## Stake New Tokens

To stake new tokens via the proxy, the token holder must use use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.06):

`lockedTokens/staker/stake_new_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **amount** | UFix64 | The quantity of new FLOW tokens to add to the user's stake. |

This transaction commits tokens to stake from the user's locked token account.

## Stake Unstaked Tokens

To stake unstaked tokens (tokens that had been previously staked but were unstaked) via the proxy, 
the token holder must use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.07):

`lockedTokens/staker/stake_unstaked_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **amount** | UFix64 | The quantity of unstaked FLOW tokens to add to the user's stake. |

## Stake Rewarded Tokens

To stake rewarded tokens via the proxy, the token holder must use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.08):

`lockedTokens/staker/stake_rewarded_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **amount** | UFix64 | The quantity of rewarded FLOW tokens to add to the user's stake. |

Since rewarded tokens are considered to be unlocked for the purposes of the vesting schedule,
and staked tokens are considered locked, staking rewarded tokens marks the staked tokens as locked
and marks an equal amount of tokens in the user's locked account as unlocked.

## Unstake Tokens

To unstake all of their tokens via the proxy, the token holder must use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.09):

`lockedTokens/staker/unstake_all.cdc`

Transaction arguments:

None.

**Note that this will unstake all of the user's staked tokens.**

When a user unstakes their tokens, they must wait until the end of the following epoch to be able to withdraw them.

## Withdraw Unstaked Tokens

To withdraw unstaked tokens (tokens that were previously staked and then unstaked) via the proxy, the token holder must use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.10):

`lockedTokens/staker/withdraw_unstaked_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **amount** | UFix64 | The quantity of unstaked FLOW tokens to withdraw from the proxy. |

## Withdraw Rewarded Tokens

To withdraw rewarded tokens via the proxy, the token holder must use transaction [../transactions/#staking-with-lockboxnodestakerproxy](TH.11):

`lockedTokens/staker/withdraw_rewarded_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **amount** | UFix64 | The quantity of rewarded FLOW tokens to withdraw from the proxy. |

Since rewards are considered to be unlocked for the purposes of vesting. This marks an equal amount in your locked account as unlocked.
You can immediately withdraw your unlocked reward tokens from your account after withdrawing rewards.
