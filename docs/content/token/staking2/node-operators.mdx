---
title: How to be a Flow Node Operator
sidebar_title: For Node Operators
---

# Introduction

This guide covers the technical integration required for a **node operator (NO)** to operate
a staked Flow node using locked FLOW provided by a **token holder (TH)**.

Both parties have separate roles in this relationship:

- **Node Operator:** Manages the node infrastructure but _does not hold_ any FLOW tokens.
- **Token Holder:** Provides restricted, indirect access to their FLOW tokens for the sole purpose of staking.

This guide assumes that the **node operator** has already established a 
trusted relationship with a **token holder**.

# Setup

These are the steps taken by a **node operator** to set up the integration with a **token holder**.

_Note: The corresponding **token holder** steps are outlined in a 
[separate guide for token holders](/token/staking2/stakers)._

## 1. Configure a node operator account

_Note: This step can be skipped if the **node operator** has already configured their account._

Before the **node operator** can begin running nodes on behalf of **token holders**, 
they must configure their account. This account is referred to as the **operator account**.

The **operator account** will hold the staking capabilities for all **token holders**.

The **node operator** can configure their account with the **Set Up Operator Account** 
([NO.01](/token/staking2/transactions/#node-operator-no)) transaction.
This transaction must be authorized by an existing account that the **token holder** wishes
to use as its **operator account**.

## 2. Create a new `NodeInfo` entry

When a **token holder** asks a **node operator** to run a node for them,
the first step is for the **node operator** to provision a new node
and create the staking and networking key-pairs.

After this is done, the **node operator** creates a `NodeInfo` entry and adds it to the 
**operator account** with the **Add Node Info** 
([NO.02](/token/staking2/transactions/#node-operator-no)) transaction.

This transaction takes the following arguments:

| Argument | Type | Purpose |
|----------|------|---------|
| **id**                | `String` | The ID of the new node. The operator is free to choose this value, but it must be unique across all nodes. |
| **role**              | `UInt8`  | The role of the new node. (1: collection, 2: consensus, 3: execution, 4: verification, 5: access) |
| **networkingAddress** | `String` | The IP address the new node. |
| **newtorkingKey**     | `String` | The networking public key as a hex-encoded string. |
| **stakingKey**        | `String` | The staking public key as a hex-encoded string. |

## 3. Send the new node ID to the token holder

After the `NodeInfo` object has been created, the **token holder** must provide the following information to the **token holder**:

- `nodeID` - The ID of the new node.
- `operatorAddress` - The Flow address of the **operator account**.

The **token holder** will use this information to grant staking access to the **node operator**.

## 4. Confirm staking access with token holder

After the `NodeInfo` object has been created and published, 
the **token holder** uses it to initiate a staking request. 
After this, the **token holder** passes a `StakingProxy.NodeStakerProxy`
capability to the **node operator** that allows them to perform staking operations.

The **node operator** should confirm that they have access to this capability.

# Staking Actions

## Stake New Tokens

To stake new tokens, the node operator must use use transaction [../transactions/#staking-with-stakingproxynodestakerproxy](NO.05):

`stakingProxy/sh_stake_new_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **nodeID** | String | The unique identifier for the node. |
| **amount** | UFix64 | The quantity of new FLOW tokens to add to the stake. |

## Re-Stake Unstaked Tokens

To re-stake previously unstaked tokens, the node operator must use use transaction [../transactions/#staking-with-stakingproxynodestakerproxy](NO.06):

`stakingProxy/sh_stake_unstaked_tokens.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **nodeID** | String | The unique identifier for the node. |
| **amount** | UFix64 | The quantity of previously unstaked FLOW tokens to add to the stake. |

## Unstake Tokens

To unstake **all previously staked** tokens, the node operator must use use transaction [../transactions/#staking-with-stakingproxynodestakerproxy](NO.07):

`stakingProxy/sh_unstake_all.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **nodeID** | String | The unique identifier for the node. |

## Withdraw Unstaked Tokens

To withdraw previously unstaked tokens, the node operator must use use transaction [../transactions/#staking-with-stakingproxynodestakerproxy](NO.08):

`stakingProxy/sh_withdraw_unstaked.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **nodeID** | String | The unique identifier for the node. |
| **amount** | UFix64 | The quantity of previously staked FLOW tokens to withdraw. |

## Withdraw Rewarded Tokens

To withdraw rewarded tokens, the node operator must use use transaction [../transactions/#staking-with-stakingproxynodestakerproxy](NO.09):

`stakingProxy/sh_withdraw_rewards.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **nodeID** | String | The unique identifier for the node. |
| **amount** | UFix64 | The quantity of rewarded FLOW tokens to withdraw. |

# Teardown

## Remove `NodeInfo` entry

The **node operator** can destroy the `NodeInfo` entry after 
the staking relationship has concluded.

To do this they must use transaction [../transactions/#staking-with-stakingproxynodestakerproxy](NO.03):

`stakingProxy/sh_remove_node_info.cdc`

Transaction arguments:

| Argument   | Type   | Purpose |
|------------|--------|---------|
| **nodeID** | String | The unique identifier for the node. |
